<!DOCTYPE html>
<html lang="en" id = "html">
    <script src = "JavaScript/jquery-3.4.1.js"></script>
    <script> 
        $(function(){
            $("header").load("header.html"); 
            $("head").load("head.html");
            $("footer").load("footer.html"); 
            $(window).resize(function () {
                $('#main-title-holder').css('min-height', $(window).height() * 0.82);
                });
            $(function(){ $(window).resize() });
            });
    </script>
    <head>

    </head>
    <body id="indexBody">
    
    
   
        <header id="header">
        </header>
        <main id = "content" >
            <div id="main-title-holder">
                <div class="verticalCenter">
                    <h1 id="mainTitle" class ="indexPageTitles">Jon Menard </h1><br>
                    
                    <h2 id="subTitle"  class ="indexPageTitles">Software Engineering Portfolio </h2>
                    <br>
                    <div class = "outer">
                        <div id="chatGPTHolder">
                            <p id = "chatGPTGreeting"><strong>Chat GPT Greeting: </strong><span id="response"  class ="indexPageTitles"> </span></p>
                        </div>
                    <div>

                </div>
            </div>
        </main>
        <footer>
            
        

        </footer>

    </body>
    <script src = "JavaScript/index.js"></script>
    <script>

        function completePrompt() {

            // Define your API endpoint URL
            const apiEndpoint = "https://jonmenardportfoliobackend-979240443910.northamerica-northeast2.run.app/test.php";
            const xhr = new XMLHttpRequest();
            xhr.open('GET', apiEndpoint);
            xhr.responseType = 'text';
            xhr.onload = function () {
                // Check if the request was successful
                if (xhr.status === 200) {
                    
                    const response = JSON.parse(xhr.responseText);
                    const responseElement = document.getElementById("response");
                    var message = response.choices[0].message.content;
                    console.log(message);
                    console.log(response);
                    // Display each letter with a delay
                    function typeWriter(index) {
                        if (index < message.length) {
                        responseElement.textContent += message.charAt(index);
                        responseElement.style.textAlign = "left";
                        index++;
                        setTimeout(function() { typeWriter(index); }, 50); // Adjust the delay to control the speed of typing
                        }
                    }

                    typeWriter(0);
                    
                } else {
                    // Log an error message
                    console.error("Request failed. Status: " + xhr.status);
                }
            };

            // Set the onerror function to handle any errors
            xhr.onerror = function () {
            console.error("Request failed. Network error.");
            };

            // Send the request with the URL-encoded form data
            xhr.send();

        }
    completePrompt()
  </script>




    </script>
</html>
